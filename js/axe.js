window.MOBILE = true;
(function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e},n=[].slice;window.Axe=new Object,Axe.Colors=["aliceblue","black","antiquewhite","navy","aqua","darkblue","aquamarine","mediumblue","azure","blue","beige","darkgreen","bisque","green","black","teal","blanchedalmond","darkcyan","blue","deepskyblue","blueviolet","darkturquoise","brown","mediumspringgreen","burlywood","lime","cadetblue","springgreen","chartreuse","aqua","chocolate","cyan","coral","midnightblue","cornflowerblue","dodgerblue","cornsilk","lightseagreen","crimson","forestgreen","cyan","seagreen","darkblue","darkslategray","darkcyan","limegreen","darkgoldenrod","mediumseagreen","darkgray","turquoise","darkgreen","royalblue","darkkhaki","steelblue","darkmagenta","darkslateblue","darkolivegreen","mediumturquoise","darkorange","indigo","darkorchid","darkolivegreen","darkred","cadetblue","darksalmon","cornflowerblue","darkseagreen","mediumaquamarine","darkslateblue","dimgray","darkslategray","slateblue","darkturquoise","olivedrab","darkviolet","slategray","deeppink","lightslategray","deepskyblue","mediumslateblue","dimgray","lawngreen","dodgerblue","chartreuse","firebrick","aquamarine","floralwhite","maroon","forestgreen","purple","fuchsia","olive","gainsboro","gray","ghostwhite","skyblue","gold","lightskyblue","goldenrod","blueviolet","gray","darkred","green","darkmagenta","greenyellow","saddlebrown","honeydew","darkseagreen","hotpink","lightgreen","indianred","mediumpurple","indigo","darkviolet","ivory","palegreen","khaki","darkorchid","lavender","yellowgreen","lavenderblush","sienna","lawngreen","brown","lemonchiffon","darkgray","lightblue","lightblue","lightcoral","greenyellow","lightcyan","lightsteelblue","lightgoldenrodyellow","powderblue","lightgreen","firebrick","lightgrey","darkgoldenrod","lightpink","mediumorchid","lightsalmon","rosybrown","lightseagreen","darkkhaki","lightskyblue","silver","lightslategray","mediumvioletred","lightsteelblue","indianred","lightyellow","peru","lime","chocolate","limegreen","tan","linen","lightgrey","magenta","thistle","maroon","orchid","mediumaquamarine","goldenrod","mediumblue","palevioletred","mediumorchid","crimson","mediumpurple","gainsboro","mediumseagreen","plum","mediumslateblue","burlywood","mediumspringgreen","lightcyan","mediumturquoise","lavender","mediumvioletred","darksalmon","midnightblue","violet","mintcream","palegoldenrod","mistyrose","lightcoral","moccasin","khaki","navajowhite","aliceblue","navy","honeydew","oldlace","azure","olive","wheat","olivedrab","beige","orange","whitesmoke","orangered","mintcream","orchid","ghostwhite","palegoldenrod","salmon","palegreen","sandybrown","palevioletred","antiquewhite","papayawhip","linen","peachpuff","lightgoldenrodyellow","peru","oldlace","pink","red","plum","fuchsia","powderblue","magenta","purple","deeppink","red","orangered","rosybrown","tomato","royalblue","hotpink","saddlebrown","coral","salmon","darkorange","sandybrown","lightsalmon","seagreen","orange","seashell","lightpink","sienna","pink","silver","gold","skyblue","peachpuff","slateblue","navajowhite","slategray","moccasin","snow","bisque","springgreen","mistyrose","steelblue","blanchedalmond","tan","papayawhip","teal","lavenderblush","thistle","seashell","tomato","cornsilk","turquoise","lemonchiffon","violet","floralwhite","wheat","snow","white","yellow","whitesmoke","lightyellow","yellow","ivory","yellowgreen","white"],Axe.Vector=function(){function t(t,e,n){this.x=null!=t?t:null,this.y=null!=e?e:null,null==n&&(n=!1),null==this.x&&(this.x=0),null==this.y&&(this.y=this.x),n&&(this.x*=Axe.Game.instance.canvas.width,this.y*=Axe.Game.instance.canvas.height)}return t.prototype.x=0,t.prototype.y=0,t.prototype.set=function(t,e){return null==t&&(t=null),null==e&&(e=null),"object"==typeof t&&null!==t?(this.x=t.x,this.y=t.y):(null==t?this.x=0:this.x=t,null==e?this.y=this.x:this.y=e)},t.prototype._add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.add=function(t){return"object"==typeof t?new Axe.Vector(this.x+t.x,this.y+t.y):"number"==typeof t?new Axe.Vector(this.x+t,this.y+t):void 0},t.prototype._sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.sub=function(t){return"object"==typeof t?new Axe.Vector(this.x-t.x,this.y-t.y):"number"==typeof t?new Axe.Vector(this.x-t,this.y-t):void 0},t.prototype._mul=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.mul=function(t){return"object"==typeof t?new Axe.Vector(this.x*t.x,this.y*t.y):"number"==typeof t?new Axe.Vector(this.x*t,this.y*t):void 0},t.prototype._div=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.div=function(t){return"object"==typeof t?new Axe.Vector(this.x/t.x,this.y/t.y):"number"==typeof t?new Axe.Vector(this.x/t,this.y/t):void 0},t.prototype.rotate=function(t){return this.x*=Math.cos(t),this.y*=Math.sin(t),this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.normalize=function(){var t;return t=this.length(),new Axe.Vector(this.x/t,this.y/t)},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.distance=function(t){var e,n;return e=this.x-t.x,n=this.y-t.y,Math.sqrt(e*e+n*n)},t.prototype.distance2=function(t){var e,n;return e=this.x-t.x,n=this.y-t.y,e*e+n*n},t}(),window.Vector=Axe.Vector,Axe.Class=function(){function t(t){var e,n,o,r,i,s;i=this.constructor.constructors;for(n in i)e=i[n],e.call(this);if(this.constructor.components)for(s=this.constructor.components,o=0,r=s.length;o<r;o++)e=s[o],this[e.component.label]=new e.component(t),this[e.component.label].parent=this,e.callback&&as(this[e.component.label],e.callback);this.init&&this.init()}return t.constructors={},t.include=function(t,e){var n,o,r;r=t.prototype;for(n in r)o=r[n],"name"!==n&&"constructor"!==n&&(this.prototype[n]=o);if(t.constructor&&t.name&&(this.constructors[t.name]=t.constructor),t.components&&t.components.forEach(function(t){return function(e){return t.component(e.component,e.callback)}}(this)),e)return as(this.prototype,e)},t.component=function(t,e){return this.components=this.components||[],this.components.push({component:t,callback:e})},t.property=function(t,e){return null==e&&(e=null),this.prototype[t]=e},t.prototype.property=function(t,e){return null==e&&(e=null),this[t]=e},t}(),Axe.Component=function(t){function n(t){this.state=t,n.__super__.constructor.call(this,this.state),this.state.components.push(this),this.id=this.state.components.length-1}return e(n,t),n.label=function(t){this.label=t},n.prototype.id=null,n.prototype.destroy=function(){var t,e,n,o;if(this.constructor.components)for(o=this.constructor.components,e=0,n=o.length;e<n;e++)t=o[e],this[t.component.label].destroy();return"function"==typeof this.destructor&&this.destructor(),delete this.state.components[this.id],this.state.components.slice(this.id,1)},n}(Axe.Class),Axe.State=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.paused=!1,n.prototype.components=[],n.prototype.dispatch=function(t,e){return this.components.forEach(function(n){if(null!=n&&"function"==typeof n[t])return n[t](e)})},n.prototype.enter=function(){},n.prototype.exit=function(){},n.prototype.pause=function(){},n.prototype.resume=function(){},n.prototype.resize=function(){},n.prototype.update=function(){return this.dispatch("update")},n}(Axe.Class),Axe.StateMachine=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return e(o,t),o.states=[],o.prototype.start=function(){var t;if(t=1<=arguments.length?n.call(arguments,0):[],this.enter.apply(this,t),"function"==typeof this.onStart)return this.onStart.apply(this,t)},o.prototype.update=function(){var t,e;if(t=1<=arguments.length?n.call(arguments,0):[],this.states.top()&&!this.states.top().paused)return(e=this.states.top()).update.apply(e,t)},o.prototype.end=function(){var t,e;return t=1<=arguments.length?n.call(arguments,0):[],"function"==typeof this.onEnd&&this.onEnd.apply(this,t),this.states.top()&&(e=this.states.top()).exit.apply(e,t),this.states.filter(function(t){return t.paused}).forEach(function(e){if(e)return e.exit.apply(e,t)}),this.states.splice(0,this.states.length)},o.prototype.enter=function(){var t,e,o;if(t=1<=arguments.length?n.call(arguments,0):[],this.states.top())return(e=this.states.top()).enter.apply(e,t),(o=this.states.top()).resize.apply(o,t)},o.prototype.next=function(){var t,e;return t=1<=arguments.length?n.call(arguments,0):[],this.states.top()&&(e=this.states.pop()).exit.apply(e,t),this.enter.apply(this,t)},o.prototype.pause=function(){var t,e;if(t=1<=arguments.length?n.call(arguments,0):[],this.states.top())return this.states.top().paused=!0,(e=this.states.top()).pause.apply(e,t)},o.prototype.resume=function(){var t,e;if(t=1<=arguments.length?n.call(arguments,0):[],this.states.top())return this.states.top().paused=!1,(e=this.states.top()).resume.apply(e,t)},o.prototype.resize=function(){var t,e;return t=1<=arguments.length?n.call(arguments,0):[],this.states.top()&&(e=this.states.top()).resize.apply(e,t),this.states.filter(function(t){return t.paused}).forEach(function(e){if(e)return e.resize.apply(e,t)})},o}(Axe.Class),Axe.Game=function(t){function n(t,e){"string"==typeof t&&(t=JSON.parse(t)),this.name=t.name,this.constructor.instance=this,"function"==typeof e&&e.call(this)}return e(n,t),n.instance=null,n.prototype.states=[],n.prototype.setup=function(t){return this.canvas=document.getElementById(this.name),this.context=this.canvas.getContext("2d"),this.buffer=document.createElement("canvas"),this.bufferContext=this.buffer.getContext("2d"),window.onresize=function(t){return function(){var e;return e=new Vector(t.canvas.width,t.canvas.height),t.resize(e),Axe.StateMachine.prototype.resize.call(t,e),t.buffer.width=t.canvas.width,t.buffer.height=t.canvas.height,t.context.mozImageSmoothingEnabled=!1,t.context.webkit1ImageSmoothingEnabled=!1,t.context.imageSmoothingEnabled=!1}}(this),as(this,t)},n.prototype.start=function(){return window.onresize(),Axe.StateMachine.prototype.start.call(this),this.loop()},n.prototype.resize=function(){},n.prototype.flip=function(){return this.context.drawImage(this.buffer,0,0)},n.prototype.swapCanvas=function(){var t;return t=[this.buffer,this.bufferContext,this.canvas,this.context],this.canvas=t[0],this.context=t[1],this.buffer=t[2],this.bufferContext=t[3],t},n.prototype.clear=function(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.loop=function(){return this.clear(),this.swapCanvas(),this.clear(),this.update(),this.swapCanvas(),this.flip(),requestAnimationFrame(bind(this,this.loop))},n}(Axe.StateMachine),Axe.Orientation=function(t){function n(t){this.state=t,n.__super__.constructor.call(this,this.state),window.addEventListener("deviceorientation",this.onMotion,!1)}return e(n,t),n.label("orientation"),n.prototype.destructor=function(){return window.removeEventListener("deviceorientation",this.onMotion,!1)},n.prototype.onMotion=function(t){},n}(Axe.Component),Axe.Keyboard=function(t){function n(t){this.state=t,n.__super__.constructor.call(this,this.state),this.__onKeyDown=bind(this,function(t){var e;if(e=Axe.Keyboard.keys[t.keyCode],Axe.Keyboard.keys[t.keyCode]=!0,!e)return this.onKeyDown(t.keyCode)}),this.__onKeyUp=bind(this,function(t){var e;if(e=!Axe.Keyboard.keys[t.keyCode],Axe.Keyboard.keys[t.keyCode]=!1,!e)return this.onKeyUp(t.keyCode)}),window.addEventListener("keydown",this.__onKeyDown,!1),window.addEventListener("keyup",this.__onKeyUp,!1)}return e(n,t),n.label("keyboard"),n.keys={},n.prototype.destructor=function(){return window.removeEventListener("keydown",this.__onKeyDown,!1),window.removeEventListener("keyup",this.__onKeyUp,!1)},n.prototype.onKeyDown=function(t){},n.prototype.onKeyUp=function(t){},n.prototype.keyDown=function(t){return Axe.Keyboard.keys[t]},n.prototype.keyUp=function(t){return!Axe.Keyboard.keys[t]},n}(Axe.Component),Axe.Renderable=function(t){function n(t){this.state=t,n.__super__.constructor.call(this,this.state)}return e(n,t),n.label("render"),n.prototype.render=function(){},n.prototype.update=function(){if(this.canvas=Axe.Game.instance.canvas,this.context=Axe.Game.instance.context,"function"==typeof this.render)return this.render()},n}(Axe.Component),window.random=function(t,e){return null==t&&null==e?Math.random():null==e?Math.random()*t:Math.random()*(e-t)+t},Array.prototype.pick=function(){return this[Math.floor(random(0,this.length))]},Array.prototype.top=function(){return this[this.length-1]},Math.lerp=function(t,e,n){return t+n*(e-t)},window.as=function(t,e){return e.call(t)},window.bind=function(t,e){return e.bind(t)},window.timeout=function(t,e){return window.setTimeout(e,t)},window.interval=function(t,e){return window.setInterval(e,t)},window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout(t,1e3/60)}}).call(this);